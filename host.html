<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Î≥ëÏõê ÌÇ§Ïò§Ïä§ÌÅ¨ Ïó∞Ïäµ - ÏãúÎãàÏïÑÏù¥</title>
    <style>
        * {
            margin: 0;
            padding: 0;
            box-sizing: border-box;
        }
        a{color: inherit; text-decoration: none;}
        body {
            font-family: 'Arial', sans-serif;
            background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
            min-height: 100vh;
            display: flex;
            justify-content: center;
            align-items: center;
            padding: 20px;
        }

        .kiosk-container {
            background: #2c3e50;
            border-radius: 30px;
            padding: 40px;
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.3);
            max-width: 800px;
            width: 100%;
        }

        .kiosk-screen {
            background: white;
            border-radius: 20px;
            padding: 30px;
            min-height: 650px;
            position: relative;
            overflow: hidden;
        }

        .header {
            text-align: center;
            margin-bottom: 30px;
            padding-bottom: 20px;
            border-bottom: 3px solid #f0f0f0;
        }

        .logo {
            font-size: 2.5em;
            color: #2c5aa0;
            font-weight: bold;
            margin-bottom: 10px;
        }

        .hospital-name {
            font-size: 1.3em;
            color: #666;
            margin-bottom: 10px;
        }

        .step-indicator {
            background: rgba(44, 90, 160, 0.1);
            padding: 8px 15px;
            border-radius: 20px;
            font-size: 0.9em;
            color: #2c5aa0;
            font-weight: bold;
            display: inline-block;
        }

        .progress-bar {
            position: absolute;
            top: 0;
            left: 0;
            height: 4px;
            background: #2c5aa0;
            border-radius: 2px;
            transition: width 0.3s ease;
        }

        .screen-content {
            text-align: center;
            margin-bottom: 30px;
        }

        .screen-title {
            font-size: 2.2em;
            color: #333;
            margin-bottom: 15px;
        }

        .screen-subtitle {
            font-size: 1.3em;
            color: #666;
            margin-bottom: 20px;
        }

        .help-tip {
            background: #e8f4f8;
            border: 1px solid #bee5eb;
            border-radius: 10px;
            padding: 15px;
            margin-bottom: 20px;
            font-size: 1.1em;
            color: #0c5460;
        }

        .help-tip strong {
            color: #062d33;
        }

        .menu-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(220px, 1fr));
            gap: 20px;
            margin-bottom: 30px;
        }

        .menu-item {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 15px;
            padding: 25px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
            min-height: 140px;
            display: flex;
            flex-direction: column;
            justify-content: center;
        }

        .menu-item:hover {
            border-color: #2c5aa0;
            transform: translateY(-3px);
            box-shadow: 0 8px 25px rgba(44, 90, 160, 0.2);
        }

        .menu-item.selected {
            border-color: #2c5aa0;
            background: rgba(44, 90, 160, 0.1);
        }

        .menu-item-icon {
            font-size: 3em;
            margin-bottom: 10px;
        }

        .menu-item-name {
            font-size: 1.3em;
            font-weight: bold;
            color: #333;
            margin-bottom: 5px;
        }

        .menu-item-desc {
            font-size: 0.9em;
            color: #666;
            line-height: 1.4;
        }

        .input-group {
            margin-bottom: 25px;
            text-align: left;
        }

        .input-label {
            display: block;
            font-size: 1.2em;
            font-weight: bold;
            color: #333;
            margin-bottom: 10px;
        }

        .input-field {
            width: 100%;
            padding: 15px;
            font-size: 1.1em;
            border: 2px solid #e9ecef;
            border-radius: 10px;
            transition: border-color 0.3s ease;
        }

        .input-field:focus {
            border-color: #2c5aa0;
            outline: none;
        }

        .card-reader {
            background: #f8f9fa;
            border: 2px dashed #2c5aa0;
            border-radius: 15px;
            padding: 40px;
            text-align: center;
            margin-bottom: 30px;
        }

        .card-icon {
            font-size: 4em;
            color: #2c5aa0;
            margin-bottom: 20px;
        }

        .card-instruction {
            font-size: 1.3em;
            color: #333;
            margin-bottom: 10px;
        }

        .card-animation {
            animation: pulse 2s infinite;
        }

        @keyframes pulse {
            0% { transform: scale(1); }
            50% { transform: scale(1.05); }
            100% { transform: scale(1); }
        }

        .info-display {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 20px;
            margin-bottom: 30px;
            text-align: left;
        }

        .info-row {
            display: flex;
            justify-content: space-between;
            align-items: center;
            padding: 12px 0;
            border-bottom: 1px solid #e9ecef;
        }

        .info-row:last-child {
            border-bottom: none;
        }

        .info-label {
            font-weight: bold;
            color: #333;
            font-size: 1.1em;
        }

        .info-value {
            color: #2c5aa0;
            font-size: 1.1em;
        }

        .action-buttons {
            display: flex;
            gap: 20px;
            justify-content: center;
            margin-top: 30px;
        }

        .action-btn {
            padding: 18px 40px;
            border: none;
            border-radius: 25px;
            font-size: 1.3em;
            font-weight: bold;
            cursor: pointer;
            transition: all 0.3s ease;
            min-width: 140px;
        }

        .btn-primary {
            background: #2c5aa0;
            color: white;
        }

        .btn-primary:hover {
            background: #1e3f73;
            transform: translateY(-2px);
        }

        .btn-secondary {
            background: #6c757d;
            color: white;
        }

        .btn-secondary:hover {
            background: #5a6268;
            transform: translateY(-2px);
        }

        .btn-success {
            background: #28a745;
            color: white;
        }

        .btn-success:hover {
            background: #1e7e34;
            transform: translateY(-2px);
        }

        .completion-screen {
            text-align: center;
            padding: 40px;
        }

        .completion-icon {
            font-size: 5em;
            color: #28a745;
            margin-bottom: 20px;
        }

        .completion-message {
            font-size: 1.5em;
            color: #333;
            margin-bottom: 20px;
        }

        .receipt-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #2c5aa0;
            margin-bottom: 20px;
            padding: 20px;
            background: rgba(44, 90, 160, 0.1);
            border-radius: 15px;
        }

        .appointment-info {
            background: #f8f9fa;
            border-radius: 15px;
            padding: 25px;
            margin-bottom: 30px;
        }

        .appointment-time {
            font-size: 1.8em;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 10px;
        }

        .waiting-info {
            font-size: 1.2em;
            color: #666;
            line-height: 1.5;
        }

        .hidden {
            display: none;
        }

        .department-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(180px, 1fr));
            gap: 15px;
            margin-bottom: 30px;
        }

        .department-item {
            background: #f8f9fa;
            border: 2px solid #e9ecef;
            border-radius: 12px;
            padding: 20px;
            cursor: pointer;
            transition: all 0.3s ease;
            text-align: center;
        }

        .department-item:hover {
            border-color: #2c5aa0;
            transform: translateY(-2px);
            box-shadow: 0 5px 15px rgba(44, 90, 160, 0.2);
        }

        .department-item.selected {
            border-color: #2c5aa0;
            background: rgba(44, 90, 160, 0.1);
        }

        .department-name {
            font-size: 1.1em;
            font-weight: bold;
            color: #333;
        }

        @media (max-width: 768px) {
            .kiosk-container {
                padding: 20px;
            }

            .menu-grid, .department-grid {
                grid-template-columns: 1fr;
                gap: 15px;
            }

            .action-buttons {
                flex-direction: column;
                gap: 15px;
            }

            .info-row {
                flex-direction: column;
                align-items: flex-start;
                gap: 5px;
            }
        }
    </style>
</head>
<body>
    <div class="kiosk-container">
        <div class="kiosk-screen">
            <div class="progress-bar" id="progressBar"></div>
            
            <!-- ÏãúÏûë ÌôîÎ©¥ -->
            <div id="startScreen" class="screen">
                <div class="header">
                    <div class="logo">üè• ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê</div>
                    <div class="hospital-name">Seoul National University Hospital</div>
                    <div class="step-indicator">1/7 Îã®Í≥Ñ</div>
                </div>
                <div class="screen-content">
                    <h2 class="screen-title">Î≥ëÏõê ÌÇ§Ïò§Ïä§ÌÅ¨Ïóê Ïò§Ïã† Í≤ÉÏùÑ ÌôòÏòÅÌï©ÎãàÎã§</h2>
                    <p class="screen-subtitle">ÏßÑÎ£å Ï†ëÏàòÎ•º ÏãúÏûëÌïòÏãúÎ†§Î©¥ ÏïÑÎûò Î≤ÑÌäºÏùÑ ÎàåÎü¨Ï£ºÏÑ∏Ïöî</p>
                    <div class="help-tip">
                        <strong>üí° ÎèÑÏõÄÎßê:</strong> Í±¥Í∞ïÎ≥¥ÌóòÏπ¥ÎìúÎ•º ÎØ∏Î¶¨ Ï§ÄÎπÑÌï¥Ï£ºÏÑ∏Ïöî. Ï¥àÏßÑÏùò Í≤ΩÏö∞ Ïã†Î∂ÑÏ¶ùÎèÑ Ìï®Íªò ÌïÑÏöîÌï©ÎãàÎã§.
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="action-btn btn-primary" onclick="nextStep()">ÏßÑÎ£å Ï†ëÏàò ÏãúÏûë</button>
                </div>
            </div>

            <!-- ÌôòÏûê Íµ¨Î∂Ñ ÌôîÎ©¥ -->
            <div id="patientTypeScreen" class="screen hidden">
                <div class="header">
                    <div class="logo">üè• ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê</div>
                    <div class="step-indicator">2/7 Îã®Í≥Ñ</div>
                </div>
                <div class="screen-content">
                    <h2 class="screen-title">ÌôòÏûê Íµ¨Î∂ÑÏùÑ ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</h2>
                    <div class="help-tip">
                        <strong>üí° ÎèÑÏõÄÎßê:</strong> Ï≤òÏùå Ïò§ÏãúÎäî Î∂ÑÏùÄ 'Ï¥àÏßÑ', Ïù¥Ï†ÑÏóê ÏßÑÎ£å Î∞õÏúºÏã† Î∂ÑÏùÄ 'Ïû¨ÏßÑ'ÏùÑ ÏÑ†ÌÉùÌïòÏÑ∏Ïöî.
                    </div>
                    <div class="menu-grid">
                        <div class="menu-item" onclick="selectPatientType('new')">
                            <div class="menu-item-icon">üÜï</div>
                            <div class="menu-item-name">Ï¥àÏßÑ</div>
                            <div class="menu-item-desc">Ï≤òÏùå ÎÇ¥ÏõêÌïòÏãúÎäî ÌôòÏûê</div>
                        </div>
                        <div class="menu-item" onclick="selectPatientType('return')">
                            <div class="menu-item-icon">üîÑ</div>
                            <div class="menu-item-name">Ïû¨ÏßÑ</div>
                            <div class="menu-item-desc">Ïù¥Ï†ÑÏóê ÏßÑÎ£å Î∞õÏúºÏã† ÌôòÏûê</div>
                        </div>
                    </div>
                </div>
            </div>

            <!-- Í±¥Í∞ïÎ≥¥ÌóòÏπ¥Îìú Ïù∏Ïãù ÌôîÎ©¥ -->
            <div id="cardScreen" class="screen hidden">
                <div class="header">
                    <div class="logo">üè• ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê</div>
                    <div class="step-indicator">3/7 Îã®Í≥Ñ</div>
                </div>
                <div class="screen-content">
                    <h2 class="screen-title">Í±¥Í∞ïÎ≥¥ÌóòÏπ¥ÎìúÎ•º ÎÑ£Ïñ¥Ï£ºÏÑ∏Ïöî</h2>
                    <div class="help-tip">
                        <strong>üí° ÎèÑÏõÄÎßê:</strong> Í±¥Í∞ïÎ≥¥ÌóòÏπ¥ÎìúÎ•º Ïπ¥Îìú Î¶¨ÎçîÍ∏∞Ïóê ÎÑ£Ïñ¥Ï£ºÏÑ∏Ïöî. Ïπ¥ÎìúÏùò Î∞©Ìñ•ÏùÑ ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî.
                    </div>
                    <div class="card-reader card-animation">
                        <div class="card-icon">üí≥</div>
                        <div class="card-instruction">Ïπ¥ÎìúÎ•º ÎÑ£Ïñ¥Ï£ºÏÑ∏Ïöî</div>
                        <div style="font-size: 1em; color: #666; margin-top: 10px;">
                            ‚Üì Ïπ¥Îìú ÏÇΩÏûÖÍµ¨ ‚Üì
                        </div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="action-btn btn-secondary" onclick="goBack()">Ïù¥Ï†Ñ</button>
                    <button class="action-btn btn-success" onclick="simulateCardRead()">Ïπ¥Îìú Ïù∏Ïãù ÏôÑÎ£å</button>
                </div>
            </div>

            <!-- Í∞úÏù∏Ï†ïÎ≥¥ ÏûÖÎ†• ÌôîÎ©¥ -->
            <div id="infoScreen" class="screen hidden">
                <div class="header">
                    <div class="logo">üè• ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê</div>
                    <div class="step-indicator">4/7 Îã®Í≥Ñ</div>
                </div>
                <div class="screen-content">
                    <h2 class="screen-title">Í∞úÏù∏Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî</h2>
                    <div class="help-tip">
                        <strong>üí° ÎèÑÏõÄÎßê:</strong> Ï†ïÌôïÌïú Í∞úÏù∏Ï†ïÎ≥¥Î•º ÏûÖÎ†•Ìï¥Ï£ºÏÑ∏Ïöî. Ïó∞ÎùΩÏ≤òÎäî ÏßÑÎ£å Í¥ÄÎ†® Ïó∞ÎùΩÏùÑ ÏúÑÌï¥ ÌïÑÏöîÌï©ÎãàÎã§.
                    </div>
                    <div class="input-group">
                        <label class="input-label">ÏÑ±Î™Ö</label>
                        <input type="text" class="input-field" id="patientName" placeholder="ÌôçÍ∏∏Îèô">
                    </div>
                    <div class="input-group">
                        <label class="input-label">ÏÉùÎÖÑÏõîÏùº</label>
                        <input type="text" class="input-field" id="birthDate" placeholder="1950-01-01">
                    </div>
                    <div class="input-group">
                        <label class="input-label">Ïó∞ÎùΩÏ≤ò</label>
                        <input type="tel" class="input-field" id="phoneNumber" placeholder="010-1234-5678">
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="action-btn btn-secondary" onclick="goBack()">Ïù¥Ï†Ñ</button>
                    <button class="action-btn btn-primary" onclick="nextStep()">Îã§Ïùå</button>
                </div>
            </div>

            <!-- ÏßÑÎ£åÍ≥º ÏÑ†ÌÉù ÌôîÎ©¥ -->
            <div id="departmentScreen" class="screen hidden">
                <div class="header">
                    <div class="logo">üè• ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê</div>
                    <div class="step-indicator">5/7 Îã®Í≥Ñ</div>
                </div>
                <div class="screen-content">
                    <h2 class="screen-title">ÏßÑÎ£åÍ≥ºÎ•º ÏÑ†ÌÉùÌï¥Ï£ºÏÑ∏Ïöî</h2>
                    <div class="help-tip">
                        <strong>üí° ÎèÑÏõÄÎßê:</strong> Ï¶ùÏÉÅÏóê ÎßûÎäî ÏßÑÎ£åÍ≥ºÎ•º ÏÑ†ÌÉùÌïòÏÑ∏Ïöî. Ïûò Î™®Î•¥ÏãúÍ≤†Îã§Î©¥ ÎÇ¥Í≥ºÎ•º ÏÑ†ÌÉùÌïòÏãúÍ±∞ÎÇò ÏïàÎÇ¥Îç∞Ïä§ÌÅ¨Ïóê Î¨∏ÏùòÌïòÏÑ∏Ïöî.
                    </div>
                    <div class="department-grid">
                        <div class="department-item" onclick="selectDepartment('ÎÇ¥Í≥º')">
                            <div class="department-name">ÎÇ¥Í≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('Ïô∏Í≥º')">
                            <div class="department-name">Ïô∏Í≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('Ï†ïÌòïÏô∏Í≥º')">
                            <div class="department-name">Ï†ïÌòïÏô∏Í≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('ÏÇ∞Î∂ÄÏù∏Í≥º')">
                            <div class="department-name">ÏÇ∞Î∂ÄÏù∏Í≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('ÏÜåÏïÑÍ≥º')">
                            <div class="department-name">ÏÜåÏïÑÍ≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('ÏïàÍ≥º')">
                            <div class="department-name">ÏïàÍ≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('Ïù¥ÎπÑÏù∏ÌõÑÍ≥º')">
                            <div class="department-name">Ïù¥ÎπÑÏù∏ÌõÑÍ≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('ÌîºÎ∂ÄÍ≥º')">
                            <div class="department-name">ÌîºÎ∂ÄÍ≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('Ïã†Í≤ΩÍ≥º')">
                            <div class="department-name">Ïã†Í≤ΩÍ≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('ÎπÑÎá®ÏùòÌïôÍ≥º')">
                            <div class="department-name">ÎπÑÎá®ÏùòÌïôÍ≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('Í∞ÄÏ†ïÏùòÌïôÍ≥º')">
                            <div class="department-name">Í∞ÄÏ†ïÏùòÌïôÍ≥º</div>
                        </div>
                        <div class="department-item" onclick="selectDepartment('ÏùëÍ∏âÏùòÌïôÍ≥º')">
                            <div class="department-name">ÏùëÍ∏âÏùòÌïôÍ≥º</div>
                        </div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="action-btn btn-secondary" onclick="goBack()">Ïù¥Ï†Ñ</button>
                </div>
            </div>

            <!-- Ï†ëÏàò ÌôïÏù∏ ÌôîÎ©¥ -->
            <div id="confirmScreen" class="screen hidden">
                <div class="header">
                    <div class="logo">üè• ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê</div>
                    <div class="step-indicator">6/7 Îã®Í≥Ñ</div>
                </div>
                <div class="screen-content">
                    <h2 class="screen-title">Ï†ëÏàò Ï†ïÎ≥¥Î•º ÌôïÏù∏Ìï¥Ï£ºÏÑ∏Ïöî</h2>
                    <div class="help-tip">
                        <strong>üí° ÎèÑÏõÄÎßê:</strong> Ï†ëÏàò Ï†ïÎ≥¥Í∞Ä Ï†ïÌôïÌïúÏßÄ ÌôïÏù∏ÌïòÏã† ÌõÑ Ï†ëÏàòÎ•º ÏôÑÎ£åÌï¥Ï£ºÏÑ∏Ïöî.
                    </div>
                    <div class="info-display">
                        <div class="info-row">
                            <span class="info-label">ÌôòÏûêÎ™Ö</span>
                            <span class="info-value" id="confirmName">ÌôçÍ∏∏Îèô</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ÌôòÏûê Íµ¨Î∂Ñ</span>
                            <span class="info-value" id="confirmType">Ïû¨ÏßÑ</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ÏßÑÎ£åÍ≥º</span>
                            <span class="info-value" id="confirmDepartment">ÎÇ¥Í≥º</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">Ï†ëÏàòÏùºÏãú</span>
                            <span class="info-value" id="confirmDate">2025-07-04 14:30</span>
                        </div>
                        <div class="info-row">
                            <span class="info-label">ÏßÑÎ£åÎπÑ</span>
                            <span class="info-value">15,000Ïõê</span>
                        </div>
                    </div>
                </div>
                <div class="action-buttons">
                    <button class="action-btn btn-secondary" onclick="goBack()">Ïù¥Ï†Ñ</button>
                    <button class="action-btn btn-primary" onclick="nextStep()">Ï†ëÏàò ÏôÑÎ£å</button>
                </div>
            </div>

            <!-- Ï†ëÏàò ÏôÑÎ£å ÌôîÎ©¥ -->
            <div id="completionScreen" class="screen hidden">
                <div class="header">
                    <div class="logo">üè• ÏÑúÏö∏ÎåÄÌïôÍµêÎ≥ëÏõê</div>
                </div>
                <div class="completion-screen">
                    <div class="completion-icon">‚úÖ</div>
                    <h2 class="completion-message">Ï†ëÏàòÍ∞Ä ÏôÑÎ£åÎêòÏóàÏäµÎãàÎã§!</h2>
                    <div class="receipt-number" id="receiptNumber">Ï†ëÏàòÎ≤àÌò∏: A-123</div>
                    <div class="appointment-info">
                        <div class="appointment-time">ÏòàÏÉÅ ÏßÑÎ£å ÏãúÍ∞Ñ: 15:30</div>
                        <div class="waiting-info">
                            ÌòÑÏû¨ ÎåÄÍ∏∞ Ïù∏Ïõê: 5Î™Ö<br>
                            ÏòàÏÉÅ ÎåÄÍ∏∞ ÏãúÍ∞Ñ: ÏïΩ 40Î∂Ñ<br><br>
                            ÏßÑÎ£å ÏàúÏÑúÍ∞Ä ÎêòÎ©¥ Î≥ëÏõê ÎÇ¥ ÏïàÎÇ¥Î∞©ÏÜ°ÏúºÎ°ú Ìò∏Ï∂úÎê©ÎãàÎã§.<br>
                            Ï†ëÏàòÎ≤àÌò∏Î•º ÏûäÏßÄ ÎßàÏÑ∏Ïöî!
                        </div>
                    </div>
                    <div class="action-buttons">
                        <button class="action-btn btn-primary" onclick="restartPractice()">Îã§Ïãú Ïó∞ÏäµÌïòÍ∏∞</button>
                        <button class="action-btn btn-secondary" onclick="goHome()">ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞</button>
                    </div>
                </div>
            </div>
        </div>
    </div>

    <script>
        let currentStep = 1;
        let maxSteps = 7;
        let patientType = '';
        let selectedDepartment = '';
        let patientInfo = {};

        // ÏßÑÌñâÎ•† ÏóÖÎç∞Ïù¥Ìä∏
        function updateProgress() {
            const progress = (currentStep / maxSteps) * 100;
            document.getElementById('progressBar').style.width = progress + '%';
        }

        // Îã§Ïùå Îã®Í≥Ñ
        function nextStep() {
            if (currentStep < maxSteps) {
                hideAllScreens();
                currentStep++;
                showCurrentScreen();
                updateProgress();
            }
        }

        // Ïù¥Ï†Ñ Îã®Í≥Ñ
        function goBack() {
            if (currentStep > 1) {
                hideAllScreens();
                currentStep--;
                showCurrentScreen();
                updateProgress();
            }
        }

        // Î™®Îì† ÌôîÎ©¥ Ïà®Í∏∞Í∏∞
        function hideAllScreens() {
            const screens = document.querySelectorAll('.screen');
            screens.forEach(screen => screen.classList.add('hidden'));
        }

        // ÌòÑÏû¨ ÌôîÎ©¥ ÌëúÏãú
        function showCurrentScreen() {
            const screenMap = {
                1: 'startScreen',
                2: 'patientTypeScreen',
                3: 'cardScreen',
                4: 'infoScreen',
                5: 'departmentScreen',
                6: 'confirmScreen',
                7: 'completionScreen'
            };
            
            const screenId = screenMap[currentStep];
            if (screenId) {
                document.getElementById(screenId).classList.remove('hidden');
                
                // ÌôïÏù∏ ÌôîÎ©¥Ïùº Îïå Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
                if (screenId === 'confirmScreen') {
                    updateConfirmation();
                }
            }
        }

        // ÌôòÏûê Íµ¨Î∂Ñ ÏÑ†ÌÉù
        function selectPatientType(type) {
            patientType = type;
            
            // ÏÑ†ÌÉù ÌëúÏãú
            const items = document.querySelectorAll('.menu-item');
            items.forEach(item => item.classList.remove('selected'));
            event.target.closest('.menu-item').classList.add('selected');
            
            setTimeout(() => {
                nextStep();
            }, 500);
        }

        // Ïπ¥Îìú Ïù∏Ïãù ÏãúÎÆ¨Î†àÏù¥ÏÖò
        function simulateCardRead() {
            const cardReader = document.querySelector('.card-reader');
            cardReader.innerHTML = `
                <div class="card-icon">‚úÖ</div>
                <div class="card-instruction">Ïπ¥Îìú Ïù∏Ïãù ÏôÑÎ£å</div>
                <div style="font-size: 1em; color: #28a745; margin-top: 10px;">
                    Í±¥Í∞ïÎ≥¥Ìóò Ï†ÅÏö© ÌôïÏù∏Îê®
                </div>
            `;
            
            setTimeout(() => {
                nextStep();
            }, 1500);
        }

        // ÏßÑÎ£åÍ≥º ÏÑ†ÌÉù
        function selectDepartment(dept) {
            selectedDepartment = dept;
            
            // ÏÑ†ÌÉù ÌëúÏãú
            const deptItems = document.querySelectorAll('.department-item');
            deptItems.forEach(item => item.classList.remove('selected'));
            event.target.closest('.department-item').classList.add('selected');
            
            setTimeout(() => {
                nextStep();
            }, 500);
        }

        // ÌôïÏù∏ Ï†ïÎ≥¥ ÏóÖÎç∞Ïù¥Ìä∏
        function updateConfirmation() {
            const name = document.getElementById('patientName').value || 'ÌôçÍ∏∏Îèô';
            const birthDate = document.getElementById('birthDate').value || '1950-01-01';
            const phone = document.getElementById('phoneNumber').value || '010-1234-5678';
            
            document.getElementById('confirmName').textContent = name;
            document.getElementById('confirmType').textContent = patientType === 'new' ? 'Ï¥àÏßÑ' : 'Ïû¨ÏßÑ';
            document.getElementById('confirmDepartment').textContent = selectedDepartment;
            
            const now = new Date();
            const dateStr = now.getFullYear() + '-' + 
                          String(now.getMonth() + 1).padStart(2, '0') + '-' + 
                          String(now.getDate()).padStart(2, '0') + ' ' +
                          String(now.getHours()).padStart(2, '0') + ':' + 
                          String(now.getMinutes()).padStart(2, '0');
            document.getElementById('confirmDate').textContent = dateStr;
            
            // Ï†ëÏàò ÏôÑÎ£å Ïãú ÏÇ¨Ïö©Ìï† Ï†ëÏàòÎ≤àÌò∏ ÏÉùÏÑ±
            const receiptNum = 'A-' + String(Math.floor(Math.random() * 900) + 100);
            document.getElementById('receiptNumber').textContent = 'Ï†ëÏàòÎ≤àÌò∏: ' + receiptNum;
        }

        // Ïó∞Ïäµ Îã§Ïãú ÏãúÏûë
        function restartPractice() {
            currentStep = 1;
            patientType = '';
            selectedDepartment = '';
            patientInfo = {};
            
            // ÏûÖÎ†• ÌïÑÎìú Ï¥àÍ∏∞Ìôî
            document.getElementById('patientName').value = '';
            document.getElementById('birthDate').value = '';
            document.getElementById('phoneNumber').value = '';
            
            hideAllScreens();
            document.getElementById('startScreen').classList.remove('hidden');
            updateProgress();
        }

        // ÌôàÏúºÎ°ú ÎèåÏïÑÍ∞ÄÍ∏∞
        function goHome() {
            window.history.back();
        }

        // Ï¥àÍ∏∞ ÏÑ§Ï†ï
        updateProgress();
    </script>
</body>
</html>